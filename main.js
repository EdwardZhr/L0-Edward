(()=>{"use strict";var e="";const t=e+"2dc780ed49aa112ed6c6.png",i=e+"eabb69d7734883c4afb4.png",n=e+"57d12ff552d119ba4df8.png";var o=[{goodUrl:"#",imgUrl:t,name:"Футболка UZcotton мужская",brand:"",color:"белый",size:"56",place:"Коледино WB",company:{name:"OOO Вайлдберриз",adress:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",ogrn:5167746237148},balance:3,newPrice:522,oldPrice:1051,selected:1,isLiked:!1,isChecked:!0,delivery:[{date:["05.02.2024","06.02.2024"],quantity:1},{date:["21.02.2024","22.02.2024"],quantity:2}],_id:0},{goodUrl:"#",imgUrl:i,name:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR",brand:"MobiSafe",color:"прозрачный",size:"",place:"Коледино WB",company:{name:"OOO Мегапрофстиль",adress:"129355, Москва, улица Боженко, 3, корпус 4, офис 34",ogrn:9218746237237},balance:203,newPrice:10500,oldPrice:11500,selected:200,isLiked:!1,isChecked:!0,delivery:[{date:["05.02.2024","06.02.2024"],quantity:184},{date:["07.02.2024","08.02.2024"],quantity:16},{date:["15.08.2024","16.08.2024"],quantity:3}],_id:1},{goodUrl:"#",imgUrl:n,name:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные',brand:"Faber-Castell",color:"",size:"",place:"Коледино WB",company:{name:"OOO Вайлдберриз",adress:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",ogrn:5167746237148},balance:4,newPrice:247,oldPrice:475,selected:2,isLiked:!1,isChecked:!0,delivery:[{date:["05.02.2024","06.02.2024"],quantity:4}],_id:2},{goodUrl:"#",imgUrl:t,name:"Футболка UZcotton мужская",brand:"",color:"белый",size:"56",place:"Коледино WB",company:{name:"OOO Вайлдберриз",adress:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",ogrn:5167746237148},balance:0,newPrice:522,oldPrice:1051,selected:0,isLiked:!1,isChecked:!1,delivery:null,_id:3},{goodUrl:"#",imgUrl:i,name:"Силиконовый чехол картхолдер (отверстия) для карт, прозрачный кейс бампер на Apple iPhone XR",brand:"MobiSafe",color:"прозрачный",size:"",place:"Коледино WB",company:"OOO Мегапрофстиль",balance:0,newPrice:10500,oldPrice:11500,selected:0,isLiked:!1,isChecked:!1,delivery:null,_id:4},{goodUrl:"#",imgUrl:n,name:'Карандаши цветные Faber-Castell "Замок", набор 24 цвета, заточенные, шестигранные',brand:"Faber-Castell",color:"",size:"",place:"Коледино WB",company:{name:"OOO Вайлдберриз",adress:"129337, Москва, улица Красная Сосна, 2, корпус 1, стр. 1, помещение 2, офис 34",ogrn:5167746237148},balance:0,newPrice:247,oldPrice:475,selected:0,isLiked:!1,isChecked:!1,delivery:null,_id:5}];function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}var s=function(){function e(t,i){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(i)}var t,i;return t=e,(i=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}}])&&l(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var d=function(){function e(t,i,n,o,r,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._goodUrl=t.goodUrl,this._imgUrl=t.imgUrl,this._name=t.name,this._brand=t.brand,this._color=t.color,this._size=t.size,this._place=t.place,this._company=t.company,this._balance=t.balance,this._newPrice=t.newPrice,this._oldPrice=t.oldPrice,this._selected=t.selected,this._isLiked=t.isLiked,this._isChecked=t.isChecked,this._id=t.id,this._templateSelector=i,this._separateNumber=n,this._updateGoods=o,this._deleteGood=r,this._checkGood=l}var t,i;return t=e,(i=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".list-item").cloneNode(!0)}},{key:"_like",value:function(){this._postponeIcon.classList.add("list-item__btn-postpone--active")}},{key:"_dislike",value:function(){this._postponeIcon.classList.remove("list-item__btn-postpone--active")}},{key:"_deleteItem",value:function(){this._item.remove(),this._item=null,this._deleteGood(this._id)}},{key:"_handleChangeQuantity",value:function(){this._newSpan=document.createElement("span"),this._oldSpan=document.createElement("span"),this._newSpan.classList.add("list-item__price-new-som"),this._newSpan.textContent=" сом",this._oldSpan.classList.add("list-item__price-old-som"),this._oldSpan.textContent=" сом",this._newPriceElement.textContent="".concat(this._separateNumber(this._newPrice*this._selected)),this._oldPriceElement.textContent="".concat(this._separateNumber(this._oldPrice*this._selected)),this._newPriceElement.appendChild(this._newSpan),this._oldPriceElement.appendChild(this._oldSpan),this._balance-this._selected<=2&&this._balanceElement.classList.contains("list-item__balance--hidden")&&this._balanceElement.classList.remove("list-item__balance--hidden"),this._balance-this._selected>2&&!this._balanceElement.classList.contains("list-item__balance--hidden")&&this._balanceElement.classList.add("list-item__balance--hidden"),this._balance-this._selected<=2&&!this._balanceElement.classList.contains("list-item__balance--hidden")&&(this._balanceElement.textContent="Осталось ".concat(this._balance-this._selected," шт.")),this._selected<2&&(this._minusBtn.disabled=!0),this._selected>=2&&!0===this._minusBtn.disabled&&(this._minusBtn.disabled=!1),this._balance-this._selected==0&&(this._plusBtn.disabled=!0),this._balance-this._selected>0&&!0===this._plusBtn.disabled&&(this._plusBtn.disabled=!1)}},{key:"_minus",value:function(){this._numeric.value=--this._selected,this._handleChangeQuantity(),this._updateGoods(this._id,this._selected)}},{key:"_plus",value:function(){this._numeric.value=++this._selected,this._handleChangeQuantity(),this._updateGoods(this._id,this._selected)}},{key:"_check",value:function(e){this._checkGood(e)}},{key:"_setEventListeners",value:function(){var e=this;this._postponeIcon=this._item.querySelector(".list-item__btn-postpone"),this._deleteIcon=this._item.querySelector(".list-item__btn-del"),this._minusBtn=this._item.querySelector(".list-item__minus"),this._plusBtn=this._item.querySelector(".list-item__plus"),this._numeric=this._item.querySelector(".list-item__numeric"),this._checkbox=this._item.querySelector("input"),this._postponeIcon.addEventListener("click",(function(t){t.preventDefault(),e._isLiked?e._dislike():e._like(),e._isLiked=!e._isLiked})),this._deleteIcon.addEventListener("click",(function(t){t.preventDefault(),e._deleteItem()})),this._minusBtn.addEventListener("click",(function(t){t.preventDefault(),e._minus()})),this._plusBtn.addEventListener("click",(function(t){t.preventDefault(),e._plus()})),this._numeric.addEventListener("input",(function(){e._numeric.value=e._numeric.value.replace(/\D/g,""),e._numeric.value&&(e._numeric.value>e._balance&&(e._numeric.value=e._balance),e._selected=e._numeric.value,e._handleChangeQuantity(),e._updateGoods(e._id,e._selected))})),this._checkbox.addEventListener("input",(function(t){e._check(e._id)}))}},{key:"generateItem",value:function(){return this._item=this._getTemplate(),this._priceElement=this._item.querySelector(".list-item__price"),this._newPriceElement=this._item.querySelector(".list-item__price-new"),this._oldPriceElement=this._item.querySelector(".list-item__price-old"),this._balanceElement=this._item.querySelector(".list-item__balance"),this._colorElement=this._item.querySelector(".list-item__good-color"),this._sizeElement=this._item.querySelector(".list-item__good-size"),this._minusBtn=this._item.querySelector(".list-item__minus"),this._plusBtn=this._item.querySelector(".list-item__plus"),this._storeElement=this._item.querySelector(".list-item__good-store"),this._placeElement=this._item.querySelector(".list-item__good-place"),this._companyElement=this._item.querySelector(".list-item__good-company"),this._countElement=this._item.querySelector(".list-item__count"),this._checkboxWrapElement=this._item.querySelector(".list-item__checkbox-wrap"),this._imgElement=this._item.querySelector(".list-item__good-img"),this._infoElement=this._item.querySelector(".list-item__good-info"),this._titleElement=this._item.querySelector(".list-item__good-title"),this._photoSizeElement=this._item.querySelector(".list-item__good-photo-size"),this._companyTooltipElement=this._item.querySelector(".list-item__tooltip--company"),this._priceTooltipElement=this._item.querySelector(".list-item__tooltip--price"),this._newSpan=document.createElement("span"),this._oldSpan=document.createElement("span"),this._item.querySelector(".list-item__good-title").href=this._goodUrl,this._imgElement.href=this._goodUrl,this._item.querySelector("img").src=this._imgUrl,this._item.querySelector("img").alt=this._name,this._newSpan.classList.add("list-item__price-new-som"),this._newSpan.textContent=" сом",this._oldSpan.classList.add("list-item__price-old-som"),this._oldSpan.textContent=" сом",this._brand?this._titleElement.textContent="".concat(this._name,", ").concat(this._brand):this._titleElement.textContent=this._name,this._color&&(this._colorElement.textContent="Цвет: ".concat(this._color),this._colorElement.classList.remove("list-item__good-color--hidden")),this._size&&(this._sizeElement.textContent="Размер: ".concat(this._size),this._photoSizeElement.textContent=this._size,this._sizeElement.classList.remove("list-item__good-size--hidden"),this._photoSizeElement.classList.remove("list-item__good-size-photo--hidden")),(this._color||this._size)&&this._item.querySelector(".list-item__good-properties").classList.remove("list-item__good-properties--hidden"),0!==this._balance&&(this._storeElement.classList.remove("list-item__good-store--hidden"),this._countElement.classList.remove("list-item__count--hidden"),this._checkboxWrapElement.classList.remove("list-item__checkbox-wrap--hidden"),this._imgElement.classList.remove("list-item__good-img--grey"),this._infoElement.classList.remove("list-item__good-info--grey"),this._sizeElement.classList.remove("list-item__good-size--grey"),this._colorElement.classList.remove("list-item__good-color--grey"),this._priceElement.classList.remove("list-item__price--hidden"),this._titleElement.classList.remove("list-item__good-title--grey"),this._isChecked&&(this._checkboxWrapElement.querySelector("input").checked=!0),this._balance-this._selected<=2&&(this._balanceElement.classList.remove("list-item__balance--hidden"),this._balanceElement.textContent="Осталось ".concat(this._balance-this._selected," шт.")),this._newPrice*this._selected>=1e6&&this._newPriceElement.classList.add("list-item__price-new--small"),this._placeElement.textContent=this._place,this._companyElement.textContent=this._company.name,this._companyElement.textContent=this._company.name,this._companyTooltipElement.querySelector(".list-item__tooltip-header").textContent=this._company.name.toUpperCase(),this._companyTooltipElement.querySelector(".list-item__tooltip-info").textContent=this._company.ogrn,this._companyTooltipElement.querySelector(".list-item__tooltip-adress").textContent=this._company.adress,Math.round(100-this._newPrice/this._oldPrice*100)-10<=0?(this._priceTooltipElement.querySelectorAll(".list-item__tooltip-line")[1].remove(),this._priceTooltipElement.querySelectorAll(".list-item__tooltip-dicount")[0].textContent="Скидка ".concat(Math.round(100-this._newPrice/this._oldPrice*100),"%"),this._priceTooltipElement.querySelectorAll(".list-item__tooltip-total")[0].textContent="".concat(this._separateNumber(this._newPrice-this._oldPrice)," сом")):(this._priceTooltipElement.querySelectorAll(".list-item__tooltip-dicount")[0].textContent="Скидка ".concat(Math.round(100-this._newPrice/this._oldPrice*100)-10,"%"),this._priceTooltipElement.querySelectorAll(".list-item__tooltip-total")[0].textContent="".concat(this._separateNumber(this._newPrice-this._oldPrice-.1*(this._newPrice-this._oldPrice))," сом"),this._priceTooltipElement.querySelectorAll(".list-item__tooltip-total")[1].textContent="".concat(this._separateNumber(10*(this._newPrice-this._oldPrice)/100)," сом"))),this._newPriceElement.textContent="".concat(this._separateNumber(this._newPrice*this._selected)),this._oldPriceElement.textContent="".concat(this._separateNumber(this._oldPrice*this._selected)),this._newPriceElement.appendChild(this._newSpan),this._oldPriceElement.appendChild(this._oldSpan),this._item.querySelector(".list-item__numeric").value=this._selected,this._selected<2&&(this._minusBtn.disabled=!0),this._setEventListeners(),this._item}}])&&c(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_(o)?o:String(o)),n)}var o}var u=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sidebar=document.querySelector(t),this._separateNumber=i,this._pluralizeGoods=n,this._totalNewPriceElement=this._sidebar.querySelector(".sidebar__total"),this._totalOldPriceElement=this._sidebar.querySelector(".sidebar__sum"),this._totalDiscountElement=this._sidebar.querySelector(".sidebar__discount"),this._totalSelectedElement=this._sidebar.querySelector(".sidebar__quantity")}var t,i;return t=e,(i=[{key:"updateSidebarInfo",value:function(e){var t=e.totalNewPrice,i=e.totalOldPrice,n=e.totalSelected;this._newSpan=document.createElement("span"),this._newSpan.classList.add("sidebar__total-som"),this._newSpan.textContent=" сом",this._totalNewPriceElement.textContent="".concat(this._separateNumber(t)),this._totalNewPriceElement.appendChild(this._newSpan),this._totalOldPriceElement.textContent="".concat(this._separateNumber(i)," сом"),this._totalDiscountElement.textContent="".concat(this._separateNumber(t-i)," сом"),this._totalSelectedElement.textContent="".concat(n," ").concat(this._pluralizeGoods(n))}}])&&m(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=f(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw r}}}}function f(e,t){if(e){if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===h(o)?o:String(o)),n)}var o}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector(t),this._lines=[]}var t,i;return t=e,(i=[{key:"_transformMonth",value:function(e){return["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"][e-1]}},{key:"_createLines",value:function(){var e=this;this._container.innerHTML=null,this._lines.sort((function(e,t){return e.date[0].split(".")[1]!==t.date[0].split(".")[1]?parseInt(e.date[0].split(".")[1])-parseInt(t.date[0].split(".")[1]):parseInt(e.date[0].split(".")[0])-parseInt(t.date[0].split(".")[0])})),this._lines.forEach((function(t){var i=document.createElement("div");i.classList.add("delivery-container__line");var n=document.createElement("h3");n.classList.add("delivery-container__title");var o=document.createElement("div");o.classList.add("delivery-container__content"),n.textContent="".concat(parseInt(t.date[0].split(".")[0]),"—").concat(parseInt(t.date[1].split(".")[0])," ").concat(e._transformMonth(parseInt(t.date[0].split(".")[1]))),t.positions.forEach((function(e){var t=document.createElement("a");t.classList.add("delivery-container__img"),t.href=e.goodUrl;var i=document.createElement("img");i.src=e.imgUrl,i.alt=e.name,i.height=56,i.width=40;var n=document.createElement("a");n.classList.add("delivery-container__notify"),n.textContent=e.quantity,t.appendChild(i),t.appendChild(n),o.appendChild(t)})),e._container.appendChild(i),i.appendChild(n),i.appendChild(o)}))}},{key:"updateDeliveryContainer",value:function(e){var t=this;this._lines=[],e.forEach((function(e){if(e.isChecked&&e.selected>0)for(var i=0,n=0;i<e.selected;n++)if(i+=e.delivery[n].quantity,0===t._lines.length)if(e.selected<=e.delivery[n].quantity)t._lines.push({date:e.delivery[n].date,positions:[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.selected}]});else{for(var o=0,r=0;r<n;r++)o+=e.delivery[r].quantity;e.selected-o<=e.delivery[n].quantity?t._lines.push({date:e.delivery[n].date,positions:[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.selected-o}]}):t._lines.push({date:e.delivery[n].date,positions:[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.delivery[n].quantity}]})}else{var l,s=y(t._lines);try{for(s.s();!(l=s.n()).done;){var a=l.value;if(a.date.includes(e.delivery[n].date[0])){if(e.selected<=e.delivery[n].quantity){a.positions=[].concat(p(a.positions),[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.selected}]);break}for(var c=0,d=0;d<n;d++)c+=e.delivery[d].quantity;e.selected-c<=e.delivery[n].quantity?a.positions=[].concat(p(a.positions),[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.selected-c}]):a.positions=[].concat(p(a.positions),[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.delivery[n].quantity}]);break}for(var _=0,m=0;m<n;m++)_+=e.delivery[m].quantity;if(e.selected-_<=e.delivery[n].quantity){t._lines.push({date:e.delivery[n].date,positions:[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.selected-_}]});break}t._lines.push({date:e.delivery[n].date,positions:[{name:e.name,imgUrl:e.imgUrl,goodUrl:e.goodUrl,quantity:e.delivery[n].quantity}]});break}}catch(e){s.e(e)}finally{s.f()}}})),this._createLines()}}])&&v(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),S=document.querySelector(".list__header input"),E=document.querySelectorAll(".list__header"),k={totalNewPrice:0,totalOldPrice:0,totalSelected:0,updateTotalData:function(){this.totalNewPrice=o.reduce((function(e,t){return t.balance>0&&t.isChecked?e+t.newPrice*t.selected:e}),0),this.totalOldPrice=o.reduce((function(e,t){return t.balance>0&&t.isChecked?e+t.oldPrice*t.selected:e}),0),this.totalSelected=o.reduce((function(e,t){return t.balance>0&&t.isChecked?e+t.selected:e}),0)}},w=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},q=function(e,t){o.forEach((function(i,n){i._id===e&&(o[n].selected=t)})),k.updateTotalData(),x.updateSidebarInfo(k),I.updateDeliveryContainer(o)},P=function(e){o.forEach((function(t,i){t._id===e&&o.splice(i,1)})),k.updateTotalData(),x.updateSidebarInfo(k),I.updateDeliveryContainer(o)},C=function(){var e=!0;o.forEach((function(t){t.balance>0&&!0!==t.isChecked&&(e=!1)})),S.checked=e};C();var L=function(e){o.forEach((function(t,i){t._id===e&&(o[i].isChecked=!o[i].isChecked)})),k.updateTotalData(),x.updateSidebarInfo(k),I.updateDeliveryContainer(o),C()};S.addEventListener("input",(function(){o.forEach((function(e,t){o[t].isChecked=!o[t].isChecked})),document.querySelectorAll(".list-item .checkbox__input").forEach((function(e){e.checked=!e.checked})),k.updateTotalData(),x.updateSidebarInfo(k),I.updateDeliveryContainer(o)}));var U=function(e){return 0===e?"товаров":1===e?"товар":e>=2&&e<=4?"товара":"товаров"};E.forEach((function(e){e.querySelectorAll(".list__icon").forEach((function(e){e.addEventListener("click",(function(){var t=e.parentElement,i=t.parentElement;if(t.nextElementSibling.classList.contains("list__section--hidden"))t.nextElementSibling.classList.remove("list__section--hidden"),e.classList.remove("list__icon--rotated"),e.parentElement.querySelector(".checkbox")?(e.parentElement.querySelector(".checkbox").classList.remove("checkbox--hidden"),e.parentElement.querySelector(".list__title").remove(),i.classList.remove("basket-form__list--rolled")):t.classList.remove("list__header--rolled");else if(t.nextElementSibling.classList.add("list__section--hidden"),e.classList.add("list__icon--rotated"),t.querySelector(".checkbox")){t.querySelector(".checkbox").classList.add("checkbox--hidden");var n=document.createElement("span");n.classList.add("list__title"),n.textContent="".concat(k.totalSelected," ").concat(U(k.totalSelected)," · ").concat(w(k.totalNewPrice)," сом"),t.insertBefore(n,e),i.classList.add("basket-form__list--rolled")}else t.classList.add("list__header--rolled")}))}))}));var x=new u(".sidebar",w,U),I=new g(".delivery-container");k.updateTotalData(),x.updateSidebarInfo(k),I.updateDeliveryContainer(o);var O=function(e){return new d(e,".list-item-template",w,q,P,L).generateItem()},z=new s({renderer:function(e){if(0!==e.balance){var t=O({goodUrl:e.goodUrl,imgUrl:e.imgUrl,name:e.name,brand:e.brand,color:e.color,size:e.size,place:e.place,company:e.company,balance:e.balance,newPrice:e.newPrice,oldPrice:e.oldPrice,selected:e.selected,isLiked:e.isLiked,isChecked:e.isChecked,id:e._id});z.addItem(t)}}},".list__section");z.renderItems(o);var T=new s({renderer:function(e){if(0===e.balance){var t=O({goodUrl:e.goodUrl,imgUrl:e.imgUrl,name:e.name,brand:e.brand,color:e.color,size:e.size,place:e.place,company:e.company,balance:e.balance,newPrice:e.newPrice,oldPrice:e.oldPrice,selected:e.selected,isLiked:e.isLiked,id:e._id});T.addItem(t)}}},".list__section--missing");T.renderItems(o)})();